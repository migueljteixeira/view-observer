function e(e){return Array.isArray(e)?e.reduce(function(e,r){return r instanceof HTMLCollection?e.concat(Array.from(r)):e.concat([r])},[]):e instanceof HTMLCollection?Array.from(e):[e]}var r=function(e){var r=this;return this.intersectionObserver=new IntersectionObserver(function(e,t){e.forEach(function(e){var n=e.target;if(r.subscribers.has(n)){var s=r.subscribers.get(n);e.isIntersecting&&void 0!==s.enterCallback?(s.enterCallback(e),s.once&&(t.unobserve(n),r.subscribers.delete(s))):void 0!==s.leaveCallback&&s.leaveCallback(e)}})},e),this.subscribers=new Map,this};r.prototype.observe=function(r){var t=this;return e(r).forEach(function(e){return t.intersectionObserver.observe(e)}),this},r.prototype.unobserve=function(r){var t=this;return e(r).forEach(function(e){return t.intersectionObserver.unobserve(e)}),this},r.prototype.subscribe=function(r,t,n){var s=this;return e(r).forEach(function(e){return s.subscribers.set(e,{once:!1,enterCallback:t,leaveCallback:n})}),this},r.prototype.subscribeOnce=function(r,t){var n=this;return e(r).forEach(function(e){return n.subscribers.set(e,{once:!0,enterCallback:t})}),this},r.prototype.disconnect=function(){this.intersectionObserver.disconnect()},r.prototype.takeRecords=function(){return this.intersectionObserver.takeRecords()};export default function(){return new r};
